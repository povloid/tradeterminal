/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * CMPFixDPanel.java
 *
 * Created on 03.03.2011, 17:56:43
 */
package tradeterminal.operations.products.incommingandoutcomming.p1.cells_renders_and_editors.cmp;

import minersinstrument.ui.ADialog;
import minersinstrument.ui.IADialogPanel;
import org.jdesktop.application.Action;
import tradeterminal.conf.AppAccessSettings;
import tradeterminal.operations.products.incommingandoutcomming.p1.IncomingProdToDepsModel.WorkStatus;
import tradeterminal.operations.products.incommingandoutcomming.p1.IncomingProdToDepsModel.WorkStatus.CMP;

/**
 *
 * @author tt
 */
public final class CMPFixDPanel extends javax.swing.JPanel implements IADialogPanel {

    public enum ChangedVariant {
        NO_CHANGES, ADD_NEW_PRODUCT, EDIT_PRODUCTS, EDIT_MEASURES
    }

    private ChangedVariant chagesVariant = ChangedVariant.NO_CHANGES;


    private ADialog adialog;
    private WorkStatus.CMP cmp;

    /** Creates new form CMPFixDPanel */
    public CMPFixDPanel(CMP cmp) {
        initComponents();
        this.cmp = cmp;
        enablesControl();
    }

    public ADialog getAdialog() {
        return adialog;
    }

    public void setAdialog(ADialog adialog) {
        this.adialog = adialog;
    }


    

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        changeButtonGroup = new javax.swing.ButtonGroup();
        addNewProductButton = new javax.swing.JButton();
        editProducnsButton = new javax.swing.JButton();
        editMeasuresButton = new javax.swing.JButton();

        setName("Form"); // NOI18N

        javax.swing.ActionMap actionMap = org.jdesktop.application.Application.getInstance(tradeterminal.TradeTerminalApp.class).getContext().getActionMap(CMPFixDPanel.class, this);
        addNewProductButton.setAction(actionMap.get("addNewProduct")); // NOI18N
        addNewProductButton.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        addNewProductButton.setName("addNewProductButton"); // NOI18N

        editProducnsButton.setAction(actionMap.get("editProducts")); // NOI18N
        editProducnsButton.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        editProducnsButton.setName("editProducnsButton"); // NOI18N

        editMeasuresButton.setAction(actionMap.get("editRbMeasures")); // NOI18N
        editMeasuresButton.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        editMeasuresButton.setName("editMeasuresButton"); // NOI18N

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                    .addComponent(editMeasuresButton, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(addNewProductButton, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(editProducnsButton, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 326, Short.MAX_VALUE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(addNewProductButton)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(editProducnsButton)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(editMeasuresButton)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
    }// </editor-fold>//GEN-END:initComponents


    private void enablesControl() {
        addNewProductButton.setEnabled(false);
        editProducnsButton.setEnabled(false);
        editMeasuresButton.setEnabled(false);

        switch (cmp) {
            case NO_SCODE:
                addNewProductButton.setEnabled(true);
                break;
            case NO_MEASURE:
            case NO_NAME:
            case NO_NAME_AND_MEASURE:
            case NO_MEASURE_MTYPE:
                editProducnsButton.setEnabled(true);
                editMeasuresButton.setEnabled(true);
                break;
            default:
        }
    }

    @Override
    public boolean checkPanel() {
        return true;
    }

    @Override
    public void openPanel() {
    }


    

    /**
     * Добавить новый продукт в справочник
     */
    @Action
    public void addNewProduct() {
        if (!AppAccessSettings.isCurrentUserHasAccessWithMessage(
                AppAccessSettings.RB_VIEW)) {
            return;
        }

        this.chagesVariant = ChangedVariant.ADD_NEW_PRODUCT;
        adialog.doClose(ADialog.RET_OK);
    }

    /**
     * редактировать продукт в справочнике
     */
    @Action
    public void editProducts() {
        if (!AppAccessSettings.isCurrentUserHasAccessWithMessage(
                AppAccessSettings.RB_VIEW)) {
            return;
        }

        this.chagesVariant = ChangedVariant.EDIT_PRODUCTS;
        adialog.doClose(ADialog.RET_OK);
    }

    /**
     * редактировать меру в справочнике
     */
    @Action
    public void editRbMeasures() {
        if (!AppAccessSettings.isCurrentUserHasAccessWithMessage(
                AppAccessSettings.RB_VIEW)) {
            return;
        }

        this.chagesVariant = ChangedVariant.EDIT_MEASURES;
        adialog.doClose(ADialog.RET_OK);
    }

    /**
     * Получить статус выбора
     * @return
     */
    public ChangedVariant getChagesVariant() {
        return this.chagesVariant;
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton addNewProductButton;
    private javax.swing.ButtonGroup changeButtonGroup;
    private javax.swing.JButton editMeasuresButton;
    private javax.swing.JButton editProducnsButton;
    // End of variables declaration//GEN-END:variables
}
